<!DOCTYPE html>
<html>
  <title>Constellation Diagram</title>
<script src="https://d3js.org/d3.v4.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="hlsi.css">
<script src=signal.js></script>
<script src=common.js></script>
<script src=label.js></script>
<script src=sliders.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.3.0/math.min.js></script>
<script src=constellationDiagram.js></script>

<body>
<div id="modCodeSlider" style="margin-left: 1%; margin-top:8%; width: 100%;"></div>
<div id="noiseSlider" style="margin-left: 1%; margin-top:8%; width: 100%;"></div>
<div id="constellationParent" style="width: 100%; height: 100%;"></div>


<!-- button legacy code  -->
<!-- <button onclick="buttonPressedAddPoints()">send message</button> -->

<button onclick="buttonPressedClearPoints()">clear message</button> 


<!-- <div id="my_dataviz"></div> -->

</body>

<script>



var sig = Signal(conf.sigIC_05, "", { bw_min: 4.0e6 });
var noise = Signal(conf.noiseIC_05, "Noise")
noise.gn = -60.0;
console.log(sig.mcs)
Slider(sig, 'mcs', null, "modCodeSlider");
constellationDiagram()

// //////////////////////////////////
// // buttons 
//   // adds the ability to manually send message via buttons
//   function buttonPressedAddPoints(){
//     // console.log(sig.sinr)

//       // Add dots
//   const randData = [
//                 { x: 1, y: 1 },
//                 { x: 1, y: -1 },
//                 { x: -1, y: 1 },
//                 { x: -1, y: -1 },
//             ];
//   const ebno = math.log10(math.abs(sig.sinr))
//   console.log(ebno);
//     for (let i = 0; i < 24; i++) {

//     svg.append('g')
//     .selectAll("dot")
//     .data(randData)
//     .enter()
//     .append("circle")
//       .attr("cx", function (d) { return x(d.x + randn_bm() * (1/ebno)**2); } )
//       .attr("cy", function (d) { return y(d.y + randn_bm() * (1/ebno)**2); } )
//       .attr("r", 1.5)
//       .style("fill","#FF0000")
//       // console.log("button pressed")
//   }

// }
 // use the clear all circles button
function buttonPressedClearPoints(){
  d3.select("#my_dataviz").selectAll("circle").remove();


}


</script>

</html>